--
-- PostgreSQL database dump
--

-- Dumped from database version 15.1
-- Dumped by pg_dump version 15.1

-- Started on 2023-02-13 21:12:01

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 219 (class 1259 OID 24645)
-- Name: card_holder; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.card_holder (
    id integer NOT NULL,
    card_holder_name character varying(50) NOT NULL
);


ALTER TABLE public.card_holder OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 24644)
-- Name: card_holder_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.card_holder_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.card_holder_id_seq OWNER TO postgres;

--
-- TOC entry 3357 (class 0 OID 0)
-- Dependencies: 218
-- Name: card_holder_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.card_holder_id_seq OWNED BY public.card_holder.id;


--
-- TOC entry 220 (class 1259 OID 24651)
-- Name: credit_card; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.credit_card (
    card_number bigint NOT NULL,
    card_holder_id integer NOT NULL
);


ALTER TABLE public.credit_card OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 24633)
-- Name: merchant; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.merchant (
    id integer NOT NULL,
    merchant_name character varying(50) NOT NULL,
    category_id integer NOT NULL
);


ALTER TABLE public.merchant OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 24626)
-- Name: merchant_category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.merchant_category (
    id integer NOT NULL,
    category_name character varying(50) NOT NULL
);


ALTER TABLE public.merchant_category OWNER TO postgres;

--
-- TOC entry 214 (class 1259 OID 24625)
-- Name: merchant_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.merchant_category_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.merchant_category_id_seq OWNER TO postgres;

--
-- TOC entry 3358 (class 0 OID 0)
-- Dependencies: 214
-- Name: merchant_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.merchant_category_id_seq OWNED BY public.merchant_category.id;


--
-- TOC entry 216 (class 1259 OID 24632)
-- Name: merchant_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.merchant_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.merchant_id_seq OWNER TO postgres;

--
-- TOC entry 3359 (class 0 OID 0)
-- Dependencies: 216
-- Name: merchant_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.merchant_id_seq OWNED BY public.merchant.id;


--
-- TOC entry 222 (class 1259 OID 24686)
-- Name: transaction; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transaction (
    id integer NOT NULL,
    date timestamp without time zone NOT NULL,
    amount numeric(10,2) NOT NULL,
    card character varying(20) NOT NULL,
    id_merchant integer NOT NULL,
    card_number bigint,
    merchant_id integer
);


ALTER TABLE public.transaction OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 24685)
-- Name: transaction_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.transaction_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.transaction_id_seq OWNER TO postgres;

--
-- TOC entry 3360 (class 0 OID 0)
-- Dependencies: 221
-- Name: transaction_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.transaction_id_seq OWNED BY public.transaction.id;


--
-- TOC entry 3194 (class 2604 OID 24648)
-- Name: card_holder id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_holder ALTER COLUMN id SET DEFAULT nextval('public.card_holder_id_seq'::regclass);


--
-- TOC entry 3193 (class 2604 OID 24636)
-- Name: merchant id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.merchant ALTER COLUMN id SET DEFAULT nextval('public.merchant_id_seq'::regclass);


--
-- TOC entry 3192 (class 2604 OID 24629)
-- Name: merchant_category id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.merchant_category ALTER COLUMN id SET DEFAULT nextval('public.merchant_category_id_seq'::regclass);


--
-- TOC entry 3195 (class 2604 OID 24689)
-- Name: transaction id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction ALTER COLUMN id SET DEFAULT nextval('public.transaction_id_seq'::regclass);


--
-- TOC entry 3201 (class 2606 OID 24650)
-- Name: card_holder card_holder_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_holder
    ADD CONSTRAINT card_holder_pkey PRIMARY KEY (id);


--
-- TOC entry 3203 (class 2606 OID 24655)
-- Name: credit_card credit_card_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.credit_card
    ADD CONSTRAINT credit_card_pkey PRIMARY KEY (card_number);


--
-- TOC entry 3197 (class 2606 OID 24631)
-- Name: merchant_category merchant_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.merchant_category
    ADD CONSTRAINT merchant_category_pkey PRIMARY KEY (id);


--
-- TOC entry 3199 (class 2606 OID 24638)
-- Name: merchant merchant_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.merchant
    ADD CONSTRAINT merchant_pkey PRIMARY KEY (id);


--
-- TOC entry 3205 (class 2606 OID 24691)
-- Name: transaction transaction_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_pkey PRIMARY KEY (id);


--
-- TOC entry 3207 (class 2606 OID 24656)
-- Name: credit_card credit_card_card_holder_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.credit_card
    ADD CONSTRAINT credit_card_card_holder_id_fkey FOREIGN KEY (card_holder_id) REFERENCES public.card_holder(id);


--
-- TOC entry 3206 (class 2606 OID 24639)
-- Name: merchant merchant_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.merchant
    ADD CONSTRAINT merchant_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.merchant_category(id);


--
-- TOC entry 3208 (class 2606 OID 24692)
-- Name: transaction transaction_card_number_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_card_number_fkey FOREIGN KEY (card_number) REFERENCES public.credit_card(card_number);


--
-- TOC entry 3209 (class 2606 OID 24697)
-- Name: transaction transaction_merchant_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_merchant_id_fkey FOREIGN KEY (merchant_id) REFERENCES public.merchant(id);


-- Completed on 2023-02-13 21:12:01

--
-- PostgreSQL database dump complete
--

